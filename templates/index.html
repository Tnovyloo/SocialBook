{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="{% static '/main-page/styles.css' %}" rel="stylesheet" type="text/css">
        <script src="https://kit.fontawesome.com/a18d53579f.js" crossorigin="anonymous"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lato&family=Kanit&family=Open+Sans:wght@500&display=swap" rel="stylesheet">
        <title>Posts</title>
    </head>
    <body>
        <main>
            <div id="background">
                <header>
                    <h3><a href="/">Fakebook</a></h3>
                    <input type="text" placeholder="Search fakebook" id="search"><label for="search"><i class="fas fa-magnifying-glass"></i></label>

                    <!-- UPLOAD WINDOW -->

                    <button id="upload">Upload photo/video</button>

                    <div id="upload-files">
                        <form action="upload" method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            <label for="photo-video">
                                <input name="image_upload" id="photo-video" type="file" accept=".jpg, .mp4">
                            </label>
                            <textarea placeholder="Caption..." style="resize: none;"></textarea>
                            <button type="submit">Upload</button>
                        </form>
                    </div>
                    
                    <ul>

                        <!-- NOTIFICATIONS WINDOW -->

                        <li>
                            <i class="fas fa-bell" id="notification-open"><span id="notification-icon"></span></i>                            
                            <div id="info">
                                <h2>Notifications</h2>
                                <i id="close-notifications">+</i>
<!--                               TODO {% for request in all_friend_request /add_or_remove_friend?operation=add -->
                                <div class="info-text">                                   
                                    <img class="profile-wrapper" src="{% static 'images/pexels-charles-1851164.jpg' %}">
                                    <p class="info-content"><a href="/add_or_remove_friend{{friend_request.id}}/add">Accept friend request</a></p>
                                    <p class="info-content"><a href="/add_or_remove_friend/{{friend_request.id}}/remove">Remove friend request</a></p>
                                    <i class="circle-notification"></i>
                                </div>
<!--                                <div class="info-text">                                   -->
<!--                                    <img class="profile-wrapper" src="{% static 'images/pexels-charles-1851164.jpg' %}">-->
<!--                                    <p class="info-content">Charles has a birthday today.</p>-->
<!--                                    <i class="circle-notification"></i>-->
<!--                                </div>-->
                            </div>
                            <span id="hover-notifications">Notifications</span>
                        </li>

                        <!-- MESSAGES WINDOW -->

                        <li>
                            <i class="fas fa-message" id="message-icon">
                                <div id="notification"></div>
                            </i>
                            <span id="hover-messages">Messages</span>
                            <div id="messages">
                                <h2>Chats</h2>
                                <i id="close-messages">+</i>
                                <div class="message">
                                    <img id="profile-wrapper" src="{% static 'images/pexels-andrea-piacquadio-837358.jpg' %}">
                                    <h4>Andrea</h4>
                                    <p class="message-content">Hello, how are you?</p>
                                    <i class="circle-message"></i>
                                </div>
                                <div class="message">
                                    <img id="profile-wrapper" src="{% static 'images/pexels-djordje-petrovic-2102416.jpg' %}">
                                    <h4>Djorde</h4>
                                    <p class="message-content">What is your hobby?</p>
                                    <i class="circle-message"></i>
                                </div>
                                <div class="message">
                                    <img id="profile-wrapper" src="{% static 'images/pexels-natalie-12502186.jpg' %}">
                                    <h4>Natalie</h4>
                                    <p class="message-content">Are you interested in football?</p>
                                    <i class="circle-message"></i>
                                </div>
                            </div>
                        </li>

                        <!-- PROFILE -->

                        <li>
                            <button id="photo-wrapper-onclick"><img src="{{user_profile.profile_img.url}}"></button>
                            <span id="hover-account">Account</span>
                        </li>

                    </ul>

                    <!-- WINDOW WITH NAVIGATION TO OTHER PAGES-->

                    <div id="other-pages">
                        <i class="fas fa-caret-up"></i>
                        <a href="settings">
                            <div class="window" id="first-window">
                                <i class='fas fa-gear'></i>
                                <p>Settings</p>
                            </div>
                        </a>

                        <a href="/profile/{{user.username}}">
                            <div class="window">
                                <i class="fas fa-user"></i>
                                <p>Profile</p>
                            </div>
                        </a>
                        
                        <a href="logout">
                            <div class="window" id="last-window">
                                <i class="fas fa-door-open"></i>
                                <p>Log Out</p>
                            </div>
                        </a>
                    </div>

                </header>
            </div>

            <div id="follow-users">
                <header>
                    <h3>Users you can follow</h3>
                    <p id="refresh">Refresh</p>
                </header>
                <div id="users-card">
                    <hr>
                    <div class="user first">
                        <div class="photo-wrapper"><img src="{% static 'images/pexels-andrea-piacquadio-837358.jpg' %}"></div>
                        <p id="name">Andrea Piacquadio</p>
                        <p class="followers">105 Followers</p>
                        <button type="submit" id="follow">Follow</button>
                    </div>
                    <hr>
                    <div class="user second">
                        <div class="photo-wrapper"><img src="{% static 'images/pexels-charles-1851164.jpg' %}"></div>
                        <p id="name">Charles</p>
                        <p class="followers">1013 Followers</p>
                        <button type="submit" id="follow">Follow</button>
                    </div>
                    <hr>
                    <div class="user third">
                        <div class="photo-wrapper"><img src="{% static 'images/pexels-djordje-petrovic-2102416.jpg' %}"></div>
                        <p id="name">Djorde Petrovic</p>
                        <p class="followers">500003 Followers</p>
                        <button type="submit" id="follow">Follow</button>
                    </div>
                    <hr>
                    <div class="user fourth">
                        <div class="photo-wrapper"><img src="{% static 'images/pexels-natalie-12502186.jpg' %}"></div>
                        <p id="name">Natalie White</p>
                        <p class="followers new">New User</p>
                        <button type="submit" id="follow">Follow</button>
                    </div>
                </div>
            </div>

            <div id="report-background">
                <div id="report-message">
                    <i class="fas fa-user-secret"></i>
                    <p>Thank you! We will check this problem.</p>
                </div>
            </div>

            <!-- Posts -->

            <div id="posts-container">
                {% for post in posts reversed %}
                    <div id="post">
                        <header>
                            <div id="profile-wrapper"><img src="{{post.profile.profile_img.url}}"></div>
                            <p><a href="profile/{{post.user_id}}">{{post.user_id}}</a></p>
                            <i class="fas fa-ellipsis"></i>
                        </header>
                        <div class="post-options">
                            <i class="fas fa-play"></i>
                            <div class="close-sign">+</div>
                            <button class="report">report post</button>
                        </div>
                        <div id="image-wrapper">
                            <a href="#">
                                {% if post.image %}
                                <img src="{{post.image.url}}" id="first-image">
                                {% endif %}
                            </a>
                        </div>
                        <div id="reactions">
                            {% if post.number_of_likes == 0 %}
                            <p>Liked by <span id="bold">no one</span></p>
                            {% elif post.number_of_likes == 1 %}
                            <p>Liked by <span id="bold">{{post.number_of_likes}} person </span></p>
                            {% elif post.number_of_likes > 1 %}
                            <p>Liked by <span id="bold">{{post.number_of_likes}} people</span></p>
                            {% endif %}
                            <div id="profiles-wrapper">
                                <div id="profile-wrapper"><img src="{% static 'images/Gryz-Szymon.jpeg' %}"></div>
                                <div id="profile-wrapper"><img src="{% static 'images/pexels-charles-1851164.jpg' %}"></div>
                                <div id="profile-wrapper"><img src="{% static 'images/pexels-djordje-petrovic-2102416.jpg' %}"></div>
                            </div>
                        </div>
                        <div id="interactions">
                            <i class="fas fa-thumbs-up"></i>
                            <a href="/like_post?post_id={{post.id}}"></a>
                            <label for="comment-input"><i class="fas fa-message"></i></label>
                            <i class="fas fa-share"></i>
                        </div>
                        <div id="comments">
                            {% for comment in post.comments.all %}
                            <div id="comment-messages">
                                <div id="comment">
                                    <div id="comment-content">
                                        <div id="profile-wrapper"><img src="{{comment.profile.profile_img.url}}"></div>
                                        {% if comment %}
                                        <p>{{comment.content}}</p>
                                        {% else %}
                                        <p>not working</p>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                            <form method="POST" action="comment">
                                {% csrf_token %}
                                <input type="text" placeholder="post a comment" id="comment-input" name="text">
                                <input type="hidden" value="{{post.id}}" name="post_id">
                                <button type="submit">Send comment.</button>
                            </form>
                            <input type="file" accept=".jpg" id="image">
                            <input type="file" accept=".mp4" id="video">
                            <label for="image"><i class="fas fa-image"></i></label>
                            <label for="video"><i class="fas fa-video"></i></label>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </main>
        <script type="text/javascript" src="{% static '/main-page/script.js' %}"></script>
    </body>
</html>
<!-- {% static '/main-page/script.js' %} -->